"use strict";

var test = require('tape');
var reduce = require('./');

function add(a, b) {
    return a + b;
}

test('exists', function(t) {
    t.equal(typeof reduce, 'function');
    t.end();
});

test('do nothing', function(t) {
    t.equal(reduce(), undefined);
    t.end();
});

test('arrays', function(t) {
    t.test('return first value', function(t) {
        t.equal(reduce([2, 3, 4]), 2);
        t.end();
    });

    t.test('sum the numbers', function(t) {
        function sum(result, value) {
            return add(result, value);
        }
        t.equal(reduce([1, 2, 3], sum), 6);
        t.equal(reduce([1, 2, 4], sum), 7);
        t.end();
    });
    t.end();
});

test('objects', function(t) {
    t.test('return first value', function(t) {
        t.equal(reduce({ 'a': 5, 'b': 2 }), 5);
        t.end();
    });

    t.test('modify each number', function(t) {
        t.deepEqual(reduce({ 'a': 1, 'b': 2 }, function(result, n, key) {
            result[key] = n * 3;
            return result;
        }, {}), { 'a': 3, 'b': 6 });
        t.end();
    });
    t.end();
});
